{"version":3,"file":"validate.js","sourceRoot":"","sources":["../../src/helper/validate.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Schema from './schema';\r\nconst schema = Schema.schema;\r\nexport function validate(object) {\r\n    var error = []\r\n    if(object != null && typeof(object) == \"object\" && Array.isArray(object) == false){ // checks if payload object passed in is really an object\r\n\r\n        for(let prop in schema) {\r\n\r\n            if(Object.keys(object).indexOf(prop)  == -1 && schema[prop].required == false) continue;\r\n    \r\n            if(schema[prop].required == true) {\r\n                if(schema[prop].isEmpty(object[prop])) error.push({'property': prop, 'error': `${prop} is a required field and cannot be empty`});\r\n            }\r\n        \r\n            if(prop == \"customer_email\") {\r\n                let is_valid = schema[prop].isValidEmail(object[prop]);\r\n                if(!is_valid) error.push({'property': prop, 'error': `${prop} must be a valid email address`});\r\n            }\r\n          \r\n            if(prop == \"subaccounts\") {\r\n                let is_valid = schema[prop].isValidArray(object[prop]);\r\n                if(!is_valid) error.push({'property': prop, 'error': `${prop} must be an array of objects`});\r\n            }\r\n          \r\n            if(prop == \"redirect_url\") {\r\n                let is_valid = schema[prop].isValidUri(object[prop]);\r\n                if(!is_valid) error.push({'property': prop, 'error': `${prop} must be a valid url`});\r\n            }\r\n            \r\n    \r\n            if(!(schema[prop].type == typeof(object[prop]))) { // checks that every parameter in the object is of its correct type\r\n                if(prop == \"subaccounts\") continue\r\n                error.push({'property': prop, 'error': `${prop} must be of type ${schema[prop].type}`});\r\n            }\r\n        }\r\n    }else error.push({property: object, error: \"You must pass in an object\"})\r\n    \r\n    if(error.length == 0) { \r\n        object.validated = true;\r\n        return {valid: true, payload: object};\r\n    }\r\n    else return {valid: false, error: error};\r\n      \r\n  }\r\n    "]}