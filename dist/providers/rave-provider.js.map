{"version":3,"file":"rave-provider.js","sourceRoot":"","sources":["../../src/providers/rave-provider.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,KAAK,SAAS,MAAM,oBAAoB,CAAC;AAChD,IAAM,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC;AACnC,MAAc,CAAC,YAAY,CAAA;AAC5B,MAAM,CAAC,cAAc,CAAC,GAAG,eAAQ,CAAA;AACjC,IAAI,YAAsB,CAAA;;IAMtB;uBAFkB,gFAAgF;oBACnF,gEAAgE;KAE9E;IAED;;;;;OAKG;;;;;;;IACH,4BAAK;;;;;;IAAL,UAAM,UAAgB,EAAE,OAAO;QAAzB,2BAAA,EAAA,kBAAgB;QAClB,EAAE,CAAC,CAAC,UAAU,CAAC;YAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACrC,IAAI;YAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;;QAG7B,IAAI,CAAC,cAAc,EAAE,CAAC;;QAGtB,EAAE,CAAA,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;QACpC,IAAI;YAAC,MAAM,CAAC,EAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,8CAA8C,EAAC,CAAA;KAEpF;IAED;;OAEG;;;;IACH,qCAAc;;;IAAd;QACI,IAAI,IAAI,GAAoB,QAAQ,CAAC,IAAI,CAAC;QAC1C,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC9C,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC5B;;gBAnCJ,UAAU;;;;uBANX;;SAOa,YAAY","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport * as Validator from '../helper/validate';\r\nconst validate = Validator.validate;\r\n(window as any).getpaidSetup\r\nwindow[\"getpaidSetup\"] = () => {}\r\nvar getpaidSetup: Function\r\n@Injectable()\r\nexport class RaveProvider {\r\n    uri: string;\r\n    sandbox: string = 'https://ravesandboxapi.flutterwave.com/flwv3-pug/getpaidx/api/flwpbf-inline.js';\r\n    live: string = 'https://api.ravepay.co/flwv3-pug/getpaidx/api/flwpbf-inline.js';\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * This function loads the rave inline js unto the current window.\r\n     * It also validates the payment object the programmer passes in\r\n     * @param production - a boolean that determines if the uri will be set to live or sandbox\r\n     * @param payload -  this is the payment object passed in by the programmer\r\n     */\r\n    setup(production=false, payload) {\r\n        if (production) this.uri = this.live;\r\n        else this.uri = this.sandbox;\r\n\r\n        // load script\r\n        this.loadRaveInline();\r\n\r\n        // validate payload\r\n        if(payload) return validate(payload)\r\n        else return {valid: false, error: \"No payment object passed in. Kindly pass one\"}\r\n\r\n    }\r\n\r\n    /**\r\n     * This function appends rave inline js to the body tag\r\n     */\r\n    loadRaveInline() {\r\n        let body = <HTMLDivElement> document.body;\r\n        let script = document.createElement(\"script\");\r\n        script.src = this.uri;\r\n        body.appendChild(script);\r\n    }\r\n\r\n    \r\n}"]}